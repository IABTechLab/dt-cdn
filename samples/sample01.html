<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	
	<title>Digitrust Sample top level page</title>
    <script src="//local.digitru.st/dist/digitrust.js"></script>
    <!--<script src="http://digitrust.s3.amazonaws.com/dev/v1/digitrust.min.js"></script>-->
    <!--<script src="//cdn.digitru.st/prod/v1/digitrust.js"></script>-->
    <script>
	// "digitrustIframe": "http://local.digitru.st/dist/dt.html"
	// "digitrustIframe": "http://cdn-staging.digitru.st/dist/dt.html"
        DigiTrust.initialize({
            member: 'example_member_id',
            site: 'example_site_id',
			//logging: { level: "DEBUG", enable: true },
            environment: {
                redirectInterval: {
                    exp: 2,
                    experiod: 's'
                },
				urls: {
                    "digitrustIframe": "//local.digitru.st/dist/dt_debug.html",
                    "digitrustIdService": "//local.digitru.st/misc/faked_id_service_v1.json"
				},
				iframe: {
					postMessageOrigin: "https://local.digitru.st",
					timeoutDuration: (1000 * 60)
                },
                crypto: {
                    serverCryptoRate: 1.0
                },
                logging: { enable: true, level: 'DEBUG'}
			}
        },
        function (digiTrustResult) {
            //console.log("Digi sample callback", digiTrustResult);
			//console.log('Digi value: ' + digiTrustResult.success);
            
            if (digiTrustResult.success){
				console.log('Success in Digitrust init');
				/*
				if(digiTrustResult.identity.id != null) {
					DigiTrustCrypto.decrypt(digiTrustResult.identity.id, function(decryptedId) {
						console.log(decryptedId);
					});
				}
				else{
					console.error('Digitrust gave success, but no identity returned');
				}
				*/
            }
			else{
				console.error('Digitrust init failed');
			}
			
        });
    </script>
</head>
<body>
	<h1>Digitrust Publisher Sample</h1>
	
	<p>
		This page demonstrates how to integrate the Digitrust framework into a publisher site.
	</p>
	
    plain text.
    <h1>Great news</h1>
    <h2>This is something you are reading.</h2>
    <a href="http://www.seattletimes.com/life/food-drink/5-ways-caliburger-is-better-than-in-n-out/">
        Link external
    </a>
    <br/><br/><br/>
    <a href="javascript:void(0)" onclick="window.DigiTrust.sendReset()"> clear cookie</a>
    <br/><br/><br/>
    <a href="page2.html"> Link internal: page.html</a>
    <br/><br/><br/>
    <a href="./page2.html"> Link internal: ./page.html</a>
    <br/><br/><br/>
    <a href="/misc/page2.html"> Link internal: /misc/page.html</a>
    <br/><br/><br/>
    <a href="#foobar"> Link internal: #foobar</a>
    <br/><br/><br/>
    This is just.
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
    <div>A test.</div>
    <br/>
    <br/>
    <br/>
    <br/>
</body>
</html>